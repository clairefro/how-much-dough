(this["webpackJsonphow-much-dough"]=this["webpackJsonphow-much-dough"]||[]).push([[0],{12:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(4),u=n.n(o),r=(n(12),n(2)),s=n(1),l=n(5),i=n.n(l),m=function(e,t,n,a){return t=t.toUpperCase(),n=n.toUpperCase(),(e/a[t]*a[n]).toFixed(2)},f=function(e){var t=e.referenceField,n=e.rates,o=Object(a.useState)(0),u=Object(s.a)(o,2),r=u[0],l=u[1],i=Object(a.useState)(0),f=Object(s.a)(i,2),d=f[0],b=f[1];return Object(a.useEffect)((function(){if("USD"!==t.code){var e=m(t.amount,t.code,"USD",n);b(e)}else b(t.amount)}),[t]),Object(a.useEffect)((function(){l(d/2.55)}),[d]),c.a.createElement("div",{className:"bread-box"},r>0&&c.a.createElement("h3",null,"That's ",r.toFixed(2)," loafs of bread in the USA."),c.a.createElement("div",{className:"breads"},"\ud83c\udf5e".repeat(r)))},d=n(6),b=n.n(d),p=function(e){e.baseCur,e.targetCur;var t=Object(a.useState)({}),n=Object(s.a)(t,2),o=n[0],u=n[1],l=Object(a.useState)([]),d=Object(s.a)(l,2),p=d[0],v=d[1],h=Object(a.useState)({amount:0,code:"USD"}),j=Object(s.a)(h,2),O=j[0],E=j[1],g=Object(a.useState)({amount:0,code:"JPY"}),S=Object(s.a)(g,2),N=S[0],y=S[1],w=Object(a.useState)(1),C=Object(s.a)(w,2),D=C[0],F=C[1],k=Object(a.useRef)(),x=Object(a.useRef)(),U=Object(a.useRef)(),J=Object(a.useRef)(),I=function(e){if(1===e){var t=k.current.value,n=U.current.value;E({amount:t,code:n})}else{var a=x.current.value,c=J.current.value;y({amount:a,code:c})}};Object(a.useEffect)((function(){if(1===D&&Object.keys(o).length>0){console.log(o);var e=m(O.amount,O.code,N.code,o.rates);y((function(t){return Object(r.a)(Object(r.a)({},t),{},{amount:e})}))}}),[O]),Object(a.useEffect)((function(){if(2===D&&Object.keys(o).length>0){console.log(o);var e=m(N.amount,N.code,O.code,o.rates);E((function(t){return Object(r.a)(Object(r.a)({},t),{},{amount:e})}))}}),[N]);var R=function(){fetch("https://openexchangerates.org/api/latest.json?app_id=5eb4c18e936f4deeb6024f3d5dbab934").then((function(e){return e.json()})).then((function(e){localStorage.setItem("hmd-rates",JSON.stringify(e)),u(e)})).catch((function(e){return console.log(e)})),console.log("fetched new rates")};return Object(a.useEffect)((function(){if(localStorage.getItem("hmd-rates")){var e=JSON.parse(localStorage.getItem("hmd-rates"));console.log("hmd-rates found in cache"),!function(e){var t=new Date,n=new Date(1e3*e);return t.getDate()!==n.getDate()}(e.timestamp)?u(e):R()}else R()}),[]),Object(a.useEffect)((function(){var e=o.rates;v(e?Object.keys(e):[])}),[o]),c.a.createElement("div",{className:"currency-converter"},c.a.createElement(i.a,{className:"bread-outline",src:b.a}),c.a.createElement("div",{className:"top"},c.a.createElement("div",{className:"input-section"},c.a.createElement("input",{ref:k,type:"number",onChange:function(){return I(1)},onFocus:function(){return 1===D?null:F(1)},className:"input-amount",value:O.amount,id:"input-1"}),c.a.createElement("select",{ref:U,name:"code1",onChange:function(){return I(1)},onFocus:function(){return 1===D?null:F(1)},value:O.code,id:"code1"},p.map((function(e){return c.a.createElement("option",{key:e,value:e},e)})))),c.a.createElement("div",{className:"input-section"},c.a.createElement("input",{ref:x,type:"number",onFocus:function(){return 2===D?null:F(2)},onChange:function(){return I(2)},className:"input-amount",value:N.amount,id:"input-2"}),c.a.createElement("select",{ref:J,name:"code2",onFocus:function(){return 2===D?null:F(2)},onChange:function(){return I(2)},value:N.code,id:"code2"},p.map((function(e){return c.a.createElement("option",{key:e,value:e},e)}))))),O.amount>0&&c.a.createElement("div",{className:"bottom"},c.a.createElement(f,{referenceField:O,rates:o.rates})))};var v=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"How Much Dough?"),c.a.createElement(p,null)))};u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(v,null)),document.getElementById("root"))},6:function(e,t,n){e.exports=n.p+"static/media/bread-outline.8e82d674.svg"},7:function(e,t,n){e.exports=n(15)}},[[7,1,2]]]);
//# sourceMappingURL=main.adaf7c87.chunk.js.map